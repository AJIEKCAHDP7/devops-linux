# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DHCP-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Linux (ISC DHCP Server)

DHCP-—Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞—ë—Ç IP-–∞–¥—Ä–µ—Å–∞ –∏ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞–º –≤ —Å–µ—Ç–∏.

–í –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `isc-dhcp-server` (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Ubuntu/Debian).

---

## 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ DHCP-—Å–µ—Ä–≤–µ—Ä–∞

### Ubuntu / Debian

```bash
sudo apt update
sudo apt install isc-dhcp-server

2. –í—ã–±–æ—Ä —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
–£–∫–∞–∂–µ–º, –Ω–∞ –∫–∞–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å DHCP.

Ubuntu / Debian
–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª:
sudo nano /etc/default/isc-dhcp-server
–ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É:
INTERFACESv4=""
–ò —É–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
INTERFACESv4="eth0"
(–≤–º–µ—Å—Ç–æ eth0 ‚Äî —Ç–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–µ–∑ ip a)

3. –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
sudo nano /etc/dhcp/dhcpd.conf
–£–¥–∞–ª—è–µ–º –≤—Å—ë –∏ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –ø—Ä–∏–º–µ—Ä:

# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
default-lease-time 600;
max-lease-time 7200;

authoritative;

option domain-name "local.net";
option domain-name-servers 8.8.8.8, 1.1.1.1;

# –ü–æ–¥—Å–µ—Ç—å
subnet 192.168.1.0 netmask 255.255.255.0 {

  range 192.168.1.100 192.168.1.200;

  option routers 192.168.1.1;
  option broadcast-address 192.168.1.255;

}
4. –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
–ü–∞—Ä–∞–º–µ—Ç—Ä	–û–ø–∏—Å–∞–Ω–∏–µ
range	–î–∏–∞–ø–∞–∑–æ–Ω –≤—ã–¥–∞–≤–∞–µ–º—ã—Ö IP
option routers	–®–ª—é–∑
domain-name-servers	DNS-—Å–µ—Ä–≤–µ—Ä—ã
default-lease-time	–í—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã IP
authoritative	–°–µ—Ä–≤–µ—Ä –≥–ª–∞–≤–Ω—ã–π

5. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP (—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ)
–ú–æ–∂–Ω–æ –∑–∞–∫—Ä–µ–ø–∏—Ç—å IP –∑–∞ MAC-–∞–¥—Ä–µ—Å–æ–º.

–î–æ–±–∞–≤—å –≤ dhcpd.conf:

conf
Copy code
host printer {
  hardware ethernet 00:11:22:33:44:55;
  fixed-address 192.168.1.50;
}
üëâ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å —ç—Ç–∏–º MAC –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç 192.168.1.50

6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
–ó–∞–ø—É—Å–∫
sudo systemctl start isc-dhcp-server

–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable isc-dhcp-server

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status isc-dhcp-server

7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ (–µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫
journalctl -u isc-dhcp-server
–∏–ª–∏
cat /var/log/syslog | grep dhcp

8. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞
–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:
dhclient -v
–∏–ª–∏
ip a
–î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è IP –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞:
192.168.1.100 ‚Äì 192.168.1.200

9. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (–µ—Å–ª–∏ –µ—Å—Ç—å)
–ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω firewall ‚Äî –æ—Ç–∫—Ä–æ–π –ø–æ—Ä—Ç 67/UDP.

UFW
sudo ufw allow 67/udp

Firewalld
sudo firewall-cmd --add-service=dhcp --permanent
sudo firewall-cmd --reload

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DHCP-—Å–µ—Ä–≤–µ—Ä:

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞—ë—Ç IP
‚úÖ –ù–∞–∑–Ω–∞—á–∞–µ—Ç —à–ª—é–∑ –∏ DNS
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å–µ—Ç–∏


  ---

  ## DHCP Leases ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä–µ–Ω–¥–æ–π IP-–∞–¥—Ä–µ—Å–æ–≤

DHCP lease ‚Äî —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞ –∑–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º (–∫–ª–∏–µ–Ω—Ç–æ–º).
DHCP-—Å–µ—Ä–≤–µ—Ä –≤—ã–¥–∞—ë—Ç IP –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è (lease time).

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞—Ä–µ–Ω–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ.

---

## 1. –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è DHCP Leases

### Ubuntu / Debian (ISC DHCP Server)
/var/lib/dhcp/dhcpd.leases

2. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –∞—Ä–µ–Ω–¥
–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
cat /var/lib/dhcp/dhcpd.leases
–∏–ª–∏
less /var/lib/dhcp/dhcpd.leases

–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

lease 192.168.1.101 {
  starts 3 2026/02/04 10:12:33;
  ends   3 2026/02/04 22:12:33;
  cltt   3 2026/02/04 10:12:33;
  binding state active;
  hardware ethernet 00:1a:2b:3c:4d:5e;
  uid "\001\000\032+<M^";
}

3. –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
–ü–æ–ª–µ	–ó–Ω–∞—á–µ–Ω–∏–µ
lease	–í—ã–¥–∞–Ω–Ω—ã–π IP
starts	–ù–∞—á–∞–ª–æ –∞—Ä–µ–Ω–¥—ã
ends	–ö–æ–Ω–µ—Ü –∞—Ä–µ–Ω–¥—ã
state active	–ê–∫—Ç–∏–≤–µ–Ω
hardware ethernet	MAC-–∞–¥—Ä–µ—Å
uid	ID –∫–ª–∏–µ–Ω—Ç–∞

4. –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ IP
grep "binding state active" -B5 /var/lib/dhcp/dhcpd.leases
  
5. –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ IP (—Å –∫–ª–∏–µ–Ω—Ç–∞)
–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:
dhclient -r
üëâ IP –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

6. –û—á–∏—Å—Ç–∫–∞ leases (—Å–±—Ä–æ—Å –∞—Ä–µ–Ω–¥)
‚ö†Ô∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ: –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—Ç –Ω–æ–≤—ã–µ IP.

–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
sudo systemctl stop isc-dhcp-server

–û—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–∞
sudo truncate -s 0 /var/lib/dhcp/dhcpd.leases

–ó–∞–ø—É—Å–∫
sudo systemctl start isc-dhcp-server

7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∞—Ä–µ–Ω–¥—ã
–í dhcpd.conf:
default-lease-time 600;
max-lease-time 7200;
–ü–∞—Ä–∞–º–µ—Ç—Ä	–ó–Ω–∞—á–µ–Ω–∏–µ
default	–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Å–µ–∫)
max	–ú–∞–∫—Å–∏–º—É–º (—Å–µ–∫)

8. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ IP –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
dhclient
–∏–ª–∏
dhclient -v

9. –ü–æ–∏—Å–∫ –ø–æ MAC –∏–ª–∏ IP
–ü–æ MAC
grep -i "00:1a:2b:3c:4d:5e" /var/lib/dhcp/dhcpd.leases
–ü–æ IP
grep "192.168.1.101" /var/lib/dhcp/dhcpd.leases

DHCP leases –ø–æ–∑–≤–æ–ª—è—é—Ç:

‚úÖ –í–∏–¥–µ—Ç—å, –∫—Ç–æ –ø–æ–ª—É—á–∏–ª IP
‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å
‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å –∞—Ä–µ–Ω–¥–æ–π

–§–∞–π–ª dhcpd.leases ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
